define(["Gwa.Event.Dispatcher"],function(a){return function(){var b=new a,c={},d=function(a,c){b.dispatch(a.toUpperCase()+"_CHANGE",c,e),b.dispatch("SETTINGS_CHANGE",a,c,e)},e={on:function(a,c){return b.on(a,c)},off:function(a,c){b.off(a,c)},set:function(a,b){return"object"==typeof c[a]&&"function"==typeof c[a].set?void c[a].set(b):"object"==typeof b&&"function"==typeof b.get?(c[a]=b,b.on("SETTINGS_CHANGE",function(b){d(a,b)}),void d(a,b.get())):void(c[a]!==b&&(c[a]=b,d(a,b)))},unset:function(a){delete c[a],b.dispatch(a.toUpperCase()+"_CHANGE",void 0,e),b.dispatch("SETTINGS_CHANGE",a,void 0,e)},get:function(a){return"undefined"==typeof a?c:"object"==typeof c[a]&&"function"==typeof c[a].get?c[a].get():c[a]},keys:function(){var a,b=[];for(a in c)b.push(a);return b}};return e}});